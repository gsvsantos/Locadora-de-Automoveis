<section class="details-section" *transloco="let t; prefix: 'partners.details'">
  <div class="main-content">
    @if (partner$ | async; as partner) {
      <div class="card">
        <h2>{{ t('card.title') }}</h2>

        <hr class="bar" />

        <div class="card-content">
          <span>{{ t('card.subtitle') }}</span>

          <h3>{{ t('card.section.partnerDetails') }}</h3>

          <div>
            <p>
              <strong>{{ t('card.label.fullName') }}:</strong>
              <span>{{ partner.fullName }}</span>
            </p>

            <p>
              <strong>{{ t('card.label.id') }}:</strong>
              <span>{{ partner.id }}</span>
            </p>

            <p>
              <strong>{{ t('card.label.status') }}:</strong>
              <span
                [class.active-status]="partner.isActive"
                [class.inactive-status]="!partner.isActive"
              >
                {{ partner.isActive ? t('card.status.active') : t('card.status.inactive') }}
              </span>
            </p>
          </div>

          <hr />

          <h3>{{ t('card.section.couponsList') }} ({{ partner.coupons.length }})</h3>

          @if (partner.coupons.length) {
            <div class="list">
              @for (coupon of partner.coupons; track coupon.id) {
                <div class="item">
                  <div class="card coupon-card">
                    <div class="card__header">
                      <div class="card_title">{{ coupon.name }}</div>
                      <span
                        [class.active-status]="coupon.isActive"
                        [class.inactive-status]="!coupon.isActive"
                      >
                        ({{
                          coupon.isActive ? t('card.status.active') : t('card.status.inactive')
                        }})
                      </span>
                    </div>

                    <div class="card__content">
                      <p>
                        <strong>{{ t('card.label.discountValue') }}:</strong>
                        <span>{{
                          coupon.discountValue | currency: 'BRL' : 'symbol' : '1.2-2'
                        }}</span>
                      </p>
                      <p>
                        <strong>{{ t('card.label.expirationDate') }}:</strong>
                        <span>{{ coupon.expirationDate | date: 'dd/MM/yyyy' : 'UTC' }}</span>
                      </p>
                    </div>

                    <div class="card__actions">
                      <a [routerLink]="['/coupons/edit', coupon.id]">
                        <span class="material-icons">edit</span>
                      </a>
                    </div>
                  </div>
                </div>
              }
            </div>
          } @else {
            <p class="no-data-message">{{ t('card.info.noCoupons') }}</p>
          }
        </div>

        <div class="buttons">
          <gs-buttons
            [buttonType]="buttonType.Link"
            [text]="t('card.buttons.back')"
            routerLink="/partners"
          ></gs-buttons>

          <gs-buttons
            [buttonType]="buttonType.Default"
            [text]="t('card.buttons.editPartner')"
            [routerLink]="['/partners/edit', partner.id]"
          ></gs-buttons>
        </div>
      </div>
    }
  </div>
</section>
