<section class="create-section" *transloco="let t; prefix: 'billingPlans.create.card'">
  <div class="main-content">
    <div class="card">
      <form [formGroup]="formGroup" class="form" (ngSubmit)="register()">
        <h3>{{ t('title') }}</h3>

        <hr class="bar" />

        <div class="card-content">
          <span class="full-width">{{ t('subtitle') }}</span>

          <h3 class="full-width">{{ t('section.groupSelection') }}</h3>
          <div class="form-field">
            <label>{{ t('label.groupId') }}</label>
            <select class="form-input" formControlName="groupId">
              <option value="">{{ t('placeholder.groupId') }}</option>
              @for (group of groups$ | async; track group.id) {
                <option [value]="group.id">{{ group.name }}</option>
              }
            </select>

            @if (groupId?.errors?.['required'] && groupId?.dirty) {
              <span class="error-message">{{ t('errors.groupIdRequired') }}</span>
            }
          </div>

          <div formGroupName="dailyBilling">
            <h3 class="full-width">{{ t('section.dailyBilling') }}</h3>
            <div class="form-field">
              <input
                class="form-input"
                formControlName="dailyRate"
                type="number"
                step="0.01"
                [placeholder]="t('placeholder.dailyRate')"
              />
              @if (dailyRateDaily?.errors?.['min'] && dailyRateDaily?.dirty) {
                <span class="error-message">{{ t('errors.rateMin') }}</span>
              }
            </div>

            <div class="form-field">
              <input
                class="form-input"
                formControlName="pricePerKm"
                type="number"
                step="0.01"
                [placeholder]="t('placeholder.pricePerKm')"
              />
              @if (pricePerKm?.errors?.['min'] && pricePerKm?.dirty) {
                <span class="error-message">{{ t('errors.rateMin') }}</span>
              }
            </div>
          </div>

          <div formGroupName="controlledBilling">
            <h3 class="full-width">{{ t('section.controlledBilling') }}</h3>
            <div class="form-field">
              <input
                class="form-input"
                formControlName="dailyRate"
                type="number"
                step="0.01"
                [placeholder]="t('placeholder.dailyRate')"
              />
              @if (dailyRateControlled?.errors?.['min'] && dailyRateControlled?.dirty) {
                <span class="error-message">{{ t('errors.rateMin') }}</span>
              }
            </div>

            <div class="form-field">
              <input
                class="form-input"
                formControlName="pricePerKmExtrapolated"
                type="number"
                step="0.01"
                [placeholder]="t('placeholder.pricePerKmExtrapolated')"
              />
              @if (pricePerKmExtrapolated?.errors?.['min'] && pricePerKmExtrapolated?.dirty) {
                <span class="error-message">{{ t('errors.rateMin') }}</span>
              }
            </div>
          </div>

          <div formGroupName="freeBilling">
            <h3 class="full-width">{{ t('section.freeBilling') }}</h3>
            <div class="form-field">
              <input
                class="form-input"
                formControlName="fixedRate"
                type="number"
                step="0.01"
                [placeholder]="t('placeholder.fixedRate')"
              />

              @if (
                freeBilling?.get('fixedRate')?.errors?.['min'] &&
                freeBilling?.get('fixedRate')?.dirty
              ) {
                <span class="error-message">{{ t('errors.rateMin') }}</span>
              }
            </div>
          </div>
        </div>

        <div class="buttons">
          <gs-buttons
            [buttonType]="buttonType.Link"
            [text]="t('buttons.back')"
            routerLink="/billing-plans"
          ></gs-buttons>

          <gs-buttons
            [buttonType]="buttonType.Default"
            [text]="t('buttons.confirm')"
            type="submit"
            [disabled]="formGroup.invalid"
            (click)="register()"
          ></gs-buttons>
        </div>
      </form>
    </div>
  </div>
</section>
