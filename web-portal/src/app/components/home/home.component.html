<section class="list-section" *transloco="let t; prefix: 'home'">
  <div class="main-content">
    <div class="items-container">
      <div class="search-bar">
        <input
          class="search-input"
          [formControl]="searchControl"
          [placeholder]="t('searchPlaceholder')"
        />
      </div>
      <div class="filters-container" style="display: flex; gap: 1rem">
        <select class="form-input" [formControl]="groupIdControl">
          <option [ngValue]="null">{{ t('filters.allGroups') }}</option>

          @if (groups$ | async; as groups) {
            @for (group of groups; track group.id) {
              <option [ngValue]="group.id">{{ group.name }}</option>
            }
          }
        </select>

        <select class="form-input" [formControl]="fuelTypeControl">
          <option [ngValue]="null">{{ t('filters.allFuels') }}</option>
          <option value="Gasoline">{{ t('fuel.Gasoline') }}</option>
          <option value="Diesel">{{ t('fuel.Diesel') }}</option>
          <option value="Alcohol">{{ t('fuel.Alcohol') }}</option>
          <option value="Gas">{{ t('fuel.Gas') }}</option>
        </select>
      </div>
    </div>

    @if (state$ | async; as state) {
      <div class="list">
        @for (vehicle of state.items; track vehicle.id) {
          <div class="item">
            <app-vehicle-card [vehicle]="vehicle" [imageBaseUrl]="urlS3"> </app-vehicle-card>
          </div>
        } @empty {
          <p class="empty-state">{{ t('noVehiclesFound') }}</p>
        }
      </div>

      @if (state.totalCount > state.pageSize) {
        <div class="pagination">
          <gs-buttons
            [buttonType]="buttonType.Default"
            [text]="t('pagination.prev')"
            [variant]="variantType.Outline"
            [disabled]="state.currentPage === 1"
            (click)="onPageChange(state.currentPage - 1)"
          >
          </gs-buttons>

          <span>
            {{
              t('pagination.info', {
                page: state.currentPage,
                total: Math.ceil(state.totalCount / state.pageSize),
              })
            }}
          </span>

          <gs-buttons
            [buttonType]="buttonType.Default"
            [text]="t('pagination.next')"
            [variant]="variantType.Outline"
            [disabled]="state.currentPage * state.pageSize >= state.totalCount"
            (click)="onPageChange(state.currentPage + 1)"
          >
          </gs-buttons>
        </div>
      }
    } @else {
      <div class="loading-skeleton">{{ t('loading') }}</div>
    }
  </div>
</section>
